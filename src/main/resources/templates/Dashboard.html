<!doctype html>
<html lang="en" xmlns:th="http://WWW.thymeleaf.org">
<head>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no"
          name="viewport">
    <link crossorigin="anonymous"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet"/>
    <title>Bridge Resilience Application</title>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script type="text/javascript" rel="stylesheet">
$(document).ready(function() {
var data =null;
  $.ajax({
        type: "GET",
        url: "http://localhost:8081/dataofdashbord",
        success: function (result) {
            var formatteddata = [];
		for(var key in result){
			var singleObject = {
					name: '',
					bri:'',
					date:''
				}
			singleObject.name = key.toUpperCase();
			var data[]=result[key];
			singleObject.bri
			for(var i = 0; i < result[key].length; i++){
				singleObject.bri.push(result[key][i].bridge_resilience);
				singleObject.bri.push(result[key][i].createDate);
			}
			console.log(singleObject);
			formatteddata.push(singleObject);
		}

		lineChart(formatteddata);
        }
    });
});
function lineChart(formatteddata) {
Highcharts.chart('line-chart', {

	    title: {
	        text: 'Bridge Resillience Growth, 2019-2020'
	    },
	    xAxis: {
                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                },
	    yAxis: {
	        title: {
	            text: 'Bridge Resillience',
	            max:1
	        }
	    },
	    legend: {
	        layout: 'vertical',
	        align: 'right',
	        verticalAlign: 'middle'
	    },
	    plotOptions: {
	        series: {
	            label: {
	                connectorAllowed: true
	            },
	            pointStart:01
	        }
	    },
	    series: formatteddata,

	    responsive: {
	        rules: [{
	            condition: {
	                maxWidth: 100
	            },
	            chartOptions: {
	                legend: {
	                    layout: 'horizontal',
	                    align: 'center',
	                    verticalAlign: 'bottom'
	                }
	            }
	        }]
	    }

	});
}
</script>
</head>
<body>
<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand text-center">Bridge Resilience</a>
</nav>

<div class="container-fluid">
    <div class="row">
            <section class="container-fluid">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <label class="label label-success">Bridge Resilience</label>
                        <div id="line-chart"></div>
                    </div>
                </div>
            </section>
            <br>
            <div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-1">
                <div class="card flex-fill">
                    <div class="card-header">
                        <div class="card-actions float-right">
                            <div class="dropdown show">
                                <a href="#" data-toggle="dropdown" data-display="static">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal align-middle"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
                                </a>

                                <div class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item" href="#">Action</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                </div>
                            </div>
                        </div>
                        <h5 class="card-title mb-0">Calendar</h5>
                    </div>
                    <div class="card-body d-flex" style="display: flex!important;">
                        <div class="align-self-center w-100">
                            <div class="chart">
                                <div id="datetimepicker-dashboard" class="flatpickr-input" readonly="readonly"></div><div class="flatpickr-calendar animate inline" tabindex="-1"><div class="flatpickr-months"><span class="flatpickr-prev-month"><span class="fas fa-chevron-left" title="Previous month"></span></span><div class="flatpickr-month"><div class="flatpickr-current-month"><select class="flatpickr-monthDropdown-months" aria-label="Month" tabindex="-1"><option class="flatpickr-monthDropdown-month" value="0" tabindex="-1">January</option><option class="flatpickr-monthDropdown-month" value="1" tabindex="-1">February</option><option class="flatpickr-monthDropdown-month" value="2" tabindex="-1">March</option><option class="flatpickr-monthDropdown-month" value="3" tabindex="-1">April</option><option class="flatpickr-monthDropdown-month" value="4" tabindex="-1">May</option><option class="flatpickr-monthDropdown-month" value="5" tabindex="-1">June</option><option class="flatpickr-monthDropdown-month" value="6" tabindex="-1">July</option><option class="flatpickr-monthDropdown-month" value="7" tabindex="-1">August</option><option class="flatpickr-monthDropdown-month" value="8" tabindex="-1">September</option><option class="flatpickr-monthDropdown-month" value="9" tabindex="-1">October</option><option class="flatpickr-monthDropdown-month" value="10" tabindex="-1">November</option><option class="flatpickr-monthDropdown-month" value="11" tabindex="-1">December</option></select><div class="numInputWrapper"><input class="numInput cur-year" type="number" tabindex="-1" aria-label="Year"><span class="arrowUp"></span><span class="arrowDown"></span></div></div></div><span class="flatpickr-next-month"><span class="fas fa-chevron-right" title="Next month"></span></span></div><div class="flatpickr-innerContainer"><div class="flatpickr-rContainer"><div class="flatpickr-weekdays"><div class="flatpickr-weekdaycontainer">
      <span class="flatpickr-weekday">
        Sun</span><span class="flatpickr-weekday">Mon</span><span class="flatpickr-weekday">Tue</span><span class="flatpickr-weekday">Wed</span><span class="flatpickr-weekday">Thu</span><span class="flatpickr-weekday">Fri</span><span class="flatpickr-weekday">Sat
      </span>
                            </div></div><div class="flatpickr-days" tabindex="-1"><div class="dayContainer"><span class="flatpickr-day prevMonthDay" aria-label="November 29, 2020" tabindex="-1">29</span><span class="flatpickr-day prevMonthDay" aria-label="November 30, 2020" tabindex="-1">30</span><span class="flatpickr-day " aria-label="December 1, 2020" tabindex="-1">1</span><span class="flatpickr-day " aria-label="December 2, 2020" tabindex="-1">2</span><span class="flatpickr-day " aria-label="December 3, 2020" tabindex="-1">3</span><span class="flatpickr-day " aria-label="December 4, 2020" tabindex="-1">4</span><span class="flatpickr-day today" aria-label="December 5, 2020" aria-current="date" tabindex="-1">5</span><span class="flatpickr-day " aria-label="December 6, 2020" tabindex="-1">6</span><span class="flatpickr-day " aria-label="December 7, 2020" tabindex="-1">7</span><span class="flatpickr-day " aria-label="December 8, 2020" tabindex="-1">8</span><span class="flatpickr-day " aria-label="December 9, 2020" tabindex="-1">9</span><span class="flatpickr-day " aria-label="December 10, 2020" tabindex="-1">10</span><span class="flatpickr-day " aria-label="December 11, 2020" tabindex="-1">11</span><span class="flatpickr-day " aria-label="December 12, 2020" tabindex="-1">12</span><span class="flatpickr-day " aria-label="December 13, 2020" tabindex="-1">13</span><span class="flatpickr-day " aria-label="December 14, 2020" tabindex="-1">14</span><span class="flatpickr-day " aria-label="December 15, 2020" tabindex="-1">15</span><span class="flatpickr-day " aria-label="December 16, 2020" tabindex="-1">16</span><span class="flatpickr-day " aria-label="December 17, 2020" tabindex="-1">17</span><span class="flatpickr-day " aria-label="December 18, 2020" tabindex="-1">18</span><span class="flatpickr-day " aria-label="December 19, 2020" tabindex="-1">19</span><span class="flatpickr-day " aria-label="December 20, 2020" tabindex="-1">20</span><span class="flatpickr-day " aria-label="December 21, 2020" tabindex="-1">21</span><span class="flatpickr-day " aria-label="December 22, 2020" tabindex="-1">22</span><span class="flatpickr-day " aria-label="December 23, 2020" tabindex="-1">23</span><span class="flatpickr-day " aria-label="December 24, 2020" tabindex="-1">24</span><span class="flatpickr-day " aria-label="December 25, 2020" tabindex="-1">25</span><span class="flatpickr-day " aria-label="December 26, 2020" tabindex="-1">26</span><span class="flatpickr-day " aria-label="December 27, 2020" tabindex="-1">27</span><span class="flatpickr-day " aria-label="December 28, 2020" tabindex="-1">28</span><span class="flatpickr-day " aria-label="December 29, 2020" tabindex="-1">29</span><span class="flatpickr-day " aria-label="December 30, 2020" tabindex="-1">30</span><span class="flatpickr-day " aria-label="December 31, 2020" tabindex="-1">31</span><span class="flatpickr-day nextMonthDay" aria-label="January 1, 2021" tabindex="-1">1</span><span class="flatpickr-day nextMonthDay" aria-label="January 2, 2021" tabindex="-1">2</span><span class="flatpickr-day nextMonthDay" aria-label="January 3, 2021" tabindex="-1">3</span><span class="flatpickr-day nextMonthDay" aria-label="January 4, 2021" tabindex="-1">4</span><span class="flatpickr-day nextMonthDay" aria-label="January 5, 2021" tabindex="-1">5</span><span class="flatpickr-day nextMonthDay" aria-label="January 6, 2021" tabindex="-1">6</span><span class="flatpickr-day nextMonthDay" aria-label="January 7, 2021" tabindex="-1">7</span><span class="flatpickr-day nextMonthDay" aria-label="January 8, 2021" tabindex="-1">8</span><span class="flatpickr-day nextMonthDay" aria-label="January 9, 2021" tabindex="-1">9</span></div></div></div></div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
</div>
</body>
</html>
